{% extends "gym_users/base.html" %}
{% load static %}
{% block content %}

   <section class="py-5">
            <div class="container my-5">
                <div class="row justify-content-center">
                    <div class="col-lg-8">
                        <div class="card">
  <div class="card-body">
      <h1>Settings</h1>

<hr>
      <ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item">
    <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Settings</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Payments</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="contact-tab" data-toggle="tab" href="#contact" role="tab" aria-controls="contact" aria-selected="false">Contact</a>
  </li>
</ul>

<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
      <form action="." method="post">
          {% csrf_token %}
      {{setting_form.as_p}}
          <input type="text" name="save_setting" value="{{request.user.id}}" hidden>
          <button class="btn btn-primary">Save</button>
    </form>
      </div>
  <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">.
      {% if check_payment  %}
        <form action="." method="post">
          {% csrf_token %}

            Name: {{form.bank_account_name}} <br><br>
            Bank Account Number: {{form.bank_account_number}} <br>
            Zip: {{form.zip}}<br>
            Address: {{form.Address}}<br>
            Amount: {{form.amount}}<br>

            <br>
          <input type="text" name="save_payment" value="{{request.user.id}}" hidden>
          <button class="btn btn-primary">Save</button>
            {% else %}
            <p>Please add a Payment First</p>
            {% endif %}
    </form>

  </div>
  <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">Content for the Contact tab.</div>
</div>

  </div>
</div>

                    </div>
                </div>
            </div>
        </section>

<div class="modal fade" id="model-content" tabindex="-1" role="dialog" aria-labelledby="expired">
    <div class="modal-dialog modal-custom" role="document">
        <div class="modal-content" style="width: 555px;" id="model-content-body">
            {% include "gym_dashboard/_partial/_create.html" %}
        </div>
    </div>
</div>


{% endblock %}
{% block scripts %}
<script>
    function load_list(){
        $.ajax({
            type: 'GET',
            url: '',
            data: {'get_list':true,
                    },
            success: function (response) {
                $('.list-item').html(response);
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                console.log('Error')
            }
        });
    }
    load_list()

    function payment()
    {
 $('#model-content').modal('show');
    }

        function submit_payment(){
            $.ajax({
                type: 'POST',
                url: '{% url 'dashboard_view' %}',
                data: $('.content-form').serialize(),
                success: function (response) {
                if(response=='success'){
                   $('#model-content').modal('hide')
                    load_list()
                    $('.content-form')[0].reset()

                }else{
                    $('#model-content-body').html(response)

                }

                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    console.log('Error')
                }
            });
        }
</script>
{% endblock scripts %}